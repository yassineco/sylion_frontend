Tu es l‚ÄôIA de Replit qui travaille sur le site marketing dark/premium de SYLION (Assistant WhatsApp IA).

üéØ Objectif de cette t√¢che :
Int√©grer **Google Analytics 4 (GA4)** et ajouter des **√©v√©nements de tracking** sur les principales actions (CTA, vues pages cl√©s, formulaires).

Le projet est en Next.js (th√®me dark), avec pages : Home, /pricing, /enterprise, /assistant-whatsapp-maroc, /whatsapp-business-api-maroc, /integration-crm-workflows, /architecture-securite, /contact, etc.

Merci de r√©aliser les modifications suivantes de mani√®re propre et typ√©e TypeScript.

---

## 1. Variable d‚Äôenvironnement GA4

1) Ajoute dans le fichier d‚Äôexample d‚ÄôENV (par ex. `.env.example` ou similaire) une ligne :

   NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX

2) Utilise la variable suivante dans le code :
   `process.env.NEXT_PUBLIC_GA_MEASUREMENT_ID`

Ne mets pas de valeur r√©elle, juste le placeholder.

---

## 2. Fichier utilitaire analytics

Cr√©e un fichier :

- si le projet a un dossier `src/lib`, utilise : `src/lib/analytics.ts`
- sinon, utilise : `src/utils/analytics.ts`

Contenu TypeScript :

- Exporter la constante :

  ```ts
  export const GA_MEASUREMENT_ID =
    process.env.NEXT_PUBLIC_GA_MEASUREMENT_ID || '';
Fonction pour envoyer les pageviews :

ts
Copier le code
export const pageview = (url: string) => {
  if (!GA_MEASUREMENT_ID || typeof window === 'undefined') return;
  (window as any).gtag?.('config', GA_MEASUREMENT_ID, {
    page_path: url,
  });
};
Fonction g√©n√©rique d‚Äôevent :

ts
Copier le code
type GAEventParams = {
  action: string;
  category?: string;
  label?: string;
  value?: number;
};

export const trackEvent = ({ action, category, label, value }: GAEventParams) => {
  if (!GA_MEASUREMENT_ID || typeof window === 'undefined') return;
  (window as any).gtag?.('event', action, {
    event_category: category,
    event_label: label,
    value,
  });
};
3. Injection du script GA4 (gtag.js)
Rep√®re le layout racine du site :

Soit src/app/layout.tsx (App Router),

soit _app.tsx / _document.tsx (Pages Router).

Je pars sur l‚Äôhypoth√®se App Router avec RootLayout.

Importer Script de next/script et GA_MEASUREMENT_ID :

ts
Copier le code
import Script from 'next/script';
import { GA_MEASUREMENT_ID } from '@/lib/analytics'; // adapte le chemin
Dans le JSX de RootLayout, juste avant la balise </body> (ou dans le return principal), ajouter :

tsx
Copier le code
{GA_MEASUREMENT_ID && (
  <>
    <Script
      src={`https://www.googletagmanager.com/gtag/js?id=${GA_MEASUREMENT_ID}`}
      strategy="afterInteractive"
    />
    <Script id="ga4-init" strategy="afterInteractive">
      {`
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', '${GA_MEASUREMENT_ID}', {
          page_path: window.location.pathname,
        });
      `}
    </Script>
  </>
)}
4. Tracking automatique des pages (page_view)
Cr√©e un petit composant AnalyticsListener pour l‚ÄôApp Router :

Fichier : src/components/AnalyticsListener.tsx (ou dossier √©quivalent).

Contenu :

ts
Copier le code
'use client';

import { usePathname, useSearchParams } from 'next/navigation';
import { useEffect } from 'react';
import { pageview } from '@/lib/analytics';

export function AnalyticsListener() {
  const pathname = usePathname();
  const searchParams = useSearchParams();

  useEffect(() => {
    if (!pathname) return;
    const url = searchParams?.toString()
      ? `${pathname}?${searchParams.toString()}`
      : pathname;
    pageview(url);
  }, [pathname, searchParams]);

  return null;
}
Dans RootLayout, √† l‚Äôint√©rieur de <body> mais en haut de la hi√©rarchie (par ex. juste apr√®s <body> ou dans le layout principal), ins√®re :

tsx
Copier le code
<AnalyticsListener />
(en n‚Äôoubliant pas d‚Äôimporter le composant).

5. √âv√©nements sur les CTA principaux
Nous allons ajouter des trackEvent sur les boutons strat√©giques.
Merci de localiser les composants (ou pages) contenant ces boutons et d‚Äôajouter l‚Äôappel dans le onClick.

Utiliser trackEvent import√© depuis @/lib/analytics.

5.1. Home / Hero
Bouton : ‚ÄúD√©marrer en 10 minutes‚Äù
Event :

ts
Copier le code
onClick={() =>
  trackEvent({
    action: 'cta_click',
    category: 'demo',
    label: 'hero_demarrer_en_10_minutes',
  })
}
Bouton : ‚ÄúVoir comment √ßa marche‚Äù (si pr√©sent) :

ts
Copier le code
onClick={() =>
  trackEvent({
    action: 'cta_click',
    category: 'navigation',
    label: 'hero_voir_comment_ca_marche',
  })
}
5.2. Page /pricing
Pour chaque bouton Demander une d√©mo des cartes Starter et Business :

ts
Copier le code
onClick={() =>
  trackEvent({
    action: 'cta_click',
    category: 'pricing',
    label: 'pricing_starter_demo', // ou pricing_business_demo
  })
}
Pour le bouton Demander un devis de la carte Enterprise :

ts
Copier le code
onClick={() =>
  trackEvent({
    action: 'cta_click',
    category: 'pricing',
    label: 'pricing_enterprise_devis',
  })
}
5.3. Page /enterprise
Bouton hero ‚ÄúDemander une consultation‚Äù :

ts
Copier le code
onClick={() =>
  trackEvent({
    action: 'cta_click',
    category: 'enterprise',
    label: 'enterprise_consultation_hero',
  })
}
Bouton hero ‚ÄúTester l‚Äôassistant‚Äù :

ts
Copier le code
onClick={() =>
  trackEvent({
    action: 'cta_click',
    category: 'enterprise',
    label: 'enterprise_tester_assistant',
  })
}
Bouton dans le bloc ‚ÄúOffre Enterprise (sur devis)‚Äù : idem label: 'enterprise_offre_sur_devis'.

5.4. Page /integration-crm-workflows
Bouton ‚ÄúParler √† un expert CRM‚Äù (en haut et en bas) :

ts
Copier le code
onClick={() =>
  trackEvent({
    action: 'cta_click',
    category: 'crm_integration',
    label: 'parler_expert_crm',
  })
}
Bouton ‚ÄúTester l‚Äôassistant‚Äù sur cette page :

ts
Copier le code
onClick={() =>
  trackEvent({
    action: 'cta_click',
    category: 'crm_integration',
    label: 'tester_assistant_depuis_crm',
  })
}
5.5. Page /architecture-securite
Bouton ‚ÄúParler √† un expert technique‚Äù :

ts
Copier le code
onClick={() =>
  trackEvent({
    action: 'cta_click',
    category: 'architecture_security',
    label: 'expert_technique',
  })
}
Bouton ‚ÄúVoir l‚Äôoffre Enterprise‚Äù :

ts
Copier le code
onClick={() =>
  trackEvent({
    action: 'cta_click',
    category: 'architecture_security',
    label: 'voir_offre_enterprise',
  })
}
5.6. Pages SEO (/assistant-whatsapp-maroc, /whatsapp-business-api-maroc)
Ajoute √©galement des events sur les CTA principaux :

category: 'assistant_whatsapp_seo' ou category: 'whatsapp_api_seo'

labels :

assistant_maroc_tester_assistant

whatsapp_api_maroc_demander_demo

6. Tracking du formulaire de contact
Sur la page /contact, localise le formulaire qui envoie le message.

Ajoute un handler sur onSubmit (ou compl√®te le handler existant) :

ts
Copier le code
const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {
  e.preventDefault();
  // logique actuelle d‚Äôenvoi du formulaire...

  trackEvent({
    action: 'form_submit',
    category: 'contact',
    label: 'contact_whatsapp_demo',
  });
};
Assure-toi que le form utilise bien ce handler :

tsx
Copier le code
<form onSubmit={handleSubmit}>
  {/* champs */}
</form>
Si le formulaire est g√©r√© autrement, adapte mais conserve l‚Äôappel trackEvent.

7. V√©rifications & propret√©
V√©rifie que chaque fichier TypeScript compile (pas d‚Äôerreur de types).

Ne duplique pas les imports de trackEvent / GA_MEASUREMENT_ID.

Conserve le style et les composants existants (Buttons, Card, etc.).

Commente bri√®vement les nouvelles fonctions pour qu‚Äôun autre dev comprenne leur r√¥le.

Ensuite, donne un r√©capitulatif des fichiers modifi√©s et une liste des events disponibles (action / category / label).